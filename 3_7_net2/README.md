<ol>
<li>
<p>На лекции мы обсудили, что манипулировать размером окна необходимо для эффективного наполнения приемного буфера участников TCP сессии (Flow Control). Подобная проблема в полной мере возникает в сетях с высоким RTT. Например, если вы захотите передать 500 Гб бэкап из региона Юга-Восточной Азии на Восточное побережье США. <a href="https://www.cloudping.co/grid" rel="nofollow">Здесь</a> вы можете увидеть и 200 и 400 мс вполне реального RTT. Подсчитайте, какого размера нужно окно TCP чтобы наполнить 1 Гбит/с канал при 300 мс RTT (берем простую ситуацию без потери пакетов). Можно воспользоваться готовым <a href="https://www.switch.ch/network/tools/tcp_throughput/" rel="nofollow">калькулятором</a>. Ознакомиться с <a href="https://en.wikipedia.org/wiki/TCP_tuning" rel="nofollow">формулами</a>, по которым работает калькулятор можно, например, на Wiki.</p>
<p> rwin = RTT * ширину канала (throughput), т.е. 300ms * 1024Mb/s = 307200
<p> Переводим в килобайты 307200 / 8 = 38400, и в мегабайты 38400 / 1024 = 37,5Mb
<p> 
TCP throughput calculator
Theoretical network limit
rough estimation: rate < (MSS/RTT)*(C/sqrt(Loss)) [ C=1 ] (based on the Mathis et.al. formula)
network limit (MSS 1460 byte, RTT: 300.0 ms, Loss: 10-08 (10-06%)) : 389.33 Mbit/sec.
Bandwidth-delay Product and buffer size
BDP (1000 Mbit/sec, 300.0 ms) = 37.50 MByte
required tcp buffer to reach 1000 Mbps with RTT of 300.0 ms >= 36621.1 KByte
maximum throughput with a TCP window of 64 KByte and RTT of 300.0 ms <= 1.75 Mbit/sec.
</li>
<li>
<p>Во сколько раз упадет пропускная способность канала, если будет 1% потерь пакетов при передаче?</p>
<p> Примерно в 10 раз
<p>
TCP throughput calculator
Theoretical network limit
rough estimation: rate < (MSS/RTT)*(C/sqrt(Loss)) [ C=1 ] (based on the Mathis et.al. formula)
network limit (MSS 1460 byte, RTT: 300.0 ms, Loss: 1%) : 0.39 Mbit/sec.
Bandwidth-delay Product and buffer size
BDP (100 Mbit/sec, 300.0 ms) = 3.75 MByte
required tcp buffer to reach 100 Mbps with RTT of 300.0 ms >= 3662.1 KByte
maximum throughput with a TCP window of 64 KByte and RTT of 300.0 ms <= 1.75 Mbit/sec.
</li>
<li>
<p>Какая  максимальная реальная скорость передачи данных достижима при линке 100 Мбит/с? Вопрос про TCP payload, то есть цифры, которые вы реально увидите в операционной системе в тестах или в браузере при скачивании файлов. Повлияет ли размер фрейма на это?</p>
<p> Max TCP Payload= (MTU–TCP–IP) / (MTU+Ethernet+IFG) = (1500–40) / (1500+26+12) = 94.9 %
<p> Размер фрейма безусловно влияет, причем прямопропорционально
</li>
<li>
<p>Что на самом деле происходит, когда вы открываете сайт? :)
На прошлой лекции был приведен сокращенный вариант ответа на этот вопрос. Теперь вы знаете намного больше, в частности про IP адресацию, DNS и т.д.
Опишите максимально подробно насколько вы это можете сделать, что происходит, когда вы делаете запрос <code>curl -I http://netology.ru</code> с вашей рабочей станции. Предположим, что arp кеш очищен, в локальном DNS нет закешированных записей.</p>
<p> 1. Поиск DNS записей (кэш - отказ, локальный DNS (DNS локальной сети, рабочей, к примеру), DNS провайдера, запрос на держателя зоны, держателя имени, возврат IP адреса)
<p> 2. Обращение по 80 порту, ответ - установка соединения, если все ок
<p> 3. соединение SYN, ACK
<p> 4. Проверка URL у сервера
<p> 5. Возврат заголовков ACK и HTTP
<p> 6. Подтверждение о получении ACK
<p> 7. Запрос на закрытие FIN
<p> 8. Подтверждение закрытия FIN
<p> 9. Подтверждение закрытия
</li>
<li>
<p>Сколько и каких итеративных запросов будет сделано при резолве домена <code>www.google.co.uk</code>?</p>
<p> Локальный, Корневой (>DNS UK), UK (>DNS co.uk), co.uk(>DNS google.co.uk), google.co.uk (> IP) - 5 запросов
</li>
<li>
<p>Сколько доступно для назначения хостам адресов в подсети <code>/25</code>? А в подсети с маской <code>255.248.0.0</code>. Постарайтесь потренироваться в ручных вычислениях чтобы немного набить руку, не пользоваться калькулятором сразу.</p>
<p> 126 при последнем октете 10 00 00 00
</li>
<li>
<p>В какой подсети больше адресов, в <code>/23</code> или <code>/24</code>?</p>
<p> чем больше битов в маске отдано нулям - тем больше хостов. Т.е. в подсети /23 хостов больше
</li>
<li>
<p>Получится ли разделить диапазон <code>10.0.0.0/8</code> на 128 подсетей по 131070 адресов в каждой? Какая маска будет у таких подсетей?</p>
<p>/8 = 24 бита. 2 в 24 = 16777216
<p>128 * 131070 = 16776960 и 256 служебных (по 2 на сеть) = 16777216
<p> Да, получится
</li>
</ol>
